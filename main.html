<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://unpkg.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' https: data:;">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fondoqi (فندقي) - Luxury Hotel & Resort Booking</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter for UI, Cormorant Garamond for elegance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Inter:wght@400;500;600;700&family=Noto+Naskh+Arabic:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Three.js for 3D Globe -->
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
      {
        "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.module.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.157.0/examples/jsm/"
        }
      }
    </script>

    <style>
        /* --- THEME VARIABLES --- */
        :root {
            --color-bg: #f8fafc;
            --color-text: #1f2937;
            --color-text-muted: #6b7280;
            --color-surface: #ffffff;
            --color-primary: #2563eb;
            --color-primary-hover: #1d4ed8;
            --color-secondary: #111827;
            --color-secondary-hover: #000000;
            --color-header-bg: rgba(255, 255, 255, 0.8);
            --color-border: #e5e7eb;
        }

        [data-theme="dark"] {
            --color-bg: #111827;
            --color-text: #f9fafb;
            --color-text-muted: #9ca3af;
            --color-surface: #1f2937;
            --color-primary: #3b82f6;
            --color-primary-hover: #2563eb;
            --color-secondary: #f9fafb;
            --color-secondary-hover: #d1d5db;
            --color-header-bg: rgba(17, 24, 39, 0.8);
            --color-border: #374151;
        }

        [data-theme="neutral"] {
            --color-bg: #f5f5dc; /* beige */
            --color-text: #5d4037; /* brown-800 */
            --color-text-muted: #8d6e63; /* brown-400 */
            --color-surface: #efebe9; /* brown-50 */
            --color-primary: #795548; /* brown-500 */
            --color-primary-hover: #5d4037; /* brown-700 */
            --color-secondary: #5d4037;
            --color-secondary-hover: #4e342e;
            --color-header-bg: rgba(239, 235, 233, 0.8);
            --color-border: #d7ccc8; /* brown-100 */
        }

        /* --- STYLES USING THEME VARIABLES --- */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            transition: background-color 0.3s, color 0.3s;
        }
        .elegant-font { font-family: 'Cormorant Garamond', serif; }
        .bg-surface { background-color: var(--color-surface); }
        .bg-primary { background-color: var(--color-primary); }
        .hover\:bg-primary-hover:hover { background-color: var(--color-primary-hover); }
        .bg-secondary { background-color: var(--color-secondary); }
        .hover\:bg-secondary-hover:hover { background-color: var(--color-secondary-hover); }
        .text-primary { color: var(--color-primary); }
        .text-muted { color: var(--color-text-muted); }
        .border-themed { border-color: var(--color-border); }
        .header-bg { background-color: var(--color-header-bg); }
        
        /* --- COMPONENT STYLES --- */
        #globe-container { cursor: grab; height: 100vh; width: 100vw; position: absolute; top: 0; left: 0; z-index: 0; }
        .content-overlay {
            position: relative;
            z-index: 1;
            background: linear-gradient(to bottom, rgba(255,255,255,0) -50%, var(--color-bg) 50%, var(--color-bg) 100%);
        }
        .hero-content { background: radial-gradient(circle, var(--color-surface) 0%, rgba(255,255,255,0) 70%); }
        .nav-link { position: relative; transition: color 0.3s ease; }
        .nav-link::after { content: ''; position: absolute; width: 0; height: 2px; bottom: -4px; left: 50%; transform: translateX(-50%); background-color: var(--color-primary); transition: width 0.3s ease; }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        .modal-backdrop { background-color: rgba(0, 0, 0, 0.5); transition: opacity 0.3s ease-in-out; }
        .modal-content { transition: transform 0.3s ease-in-out; }
        #language-selector {
            -webkit-appearance: none; -moz-appearance: none; appearance: none;
            padding-right: 2rem;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            background-size: 1.5em 1.5em;
        }
    </style>
</head>
<body class="bg-slate-50 text-gray-800">

    <!-- Global 3D Background -->
    <div id="globe-container"></div>

    <!-- Header -->
    <header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 header-bg backdrop-blur-sm shadow-sm">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <!-- Logo -->
                <a href="#" class="flex items-center space-x-2">
                    <span class="elegant-font text-4xl font-bold text-primary">F</span>
                    <span class="elegant-font text-4xl font-bold text-primary" style="font-family: 'Noto Naskh Arabic', serif;">ي</span>
                    <span class="text-2xl font-semibold tracking-wider elegant-font pt-2">Fondoqi</span>
                </a>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="#search-section" class="nav-link text-muted hover:text-primary font-medium active">Hotels</a>
                    <a href="#taxi-section" class="nav-link text-muted hover:text-primary font-medium">Taxis</a>
                    <a href="#nearby-section" class="nav-link text-muted hover:text-primary font-medium">Nearby</a>
                </nav>

                <!-- Right side controls -->
                <div class="flex items-center space-x-2">
                     <!-- Language Selector -->
                    <div class="hidden sm:block">
                        <select id="language-selector" class="cursor-pointer bg-transparent border-themed rounded-md text-sm py-2 pl-3 focus:ring-blue-500 focus:border-blue-500">
                            <!-- Options will be populated by JS -->
                        </select>
                    </div>
                    <!-- Theme Switcher -->
                    <div class="relative">
                        <button id="theme-switcher-button" class="p-2 rounded-full hover:bg-black/10 transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" /></svg>
                        </button>
                        <div id="theme-menu" class="absolute right-0 mt-2 w-32 bg-surface rounded-md shadow-lg hidden z-10 border border-themed">
                            <a href="#" class="block px-4 py-2 text-sm" data-theme="light">Light</a>
                            <a href="#" class="block px-4 py-2 text-sm" data-theme="dark">Dark</a>
                            <a href="#" class="block px-4 py-2 text-sm" data-theme="neutral">Neutral</a>
                        </div>
                    </div>
                    <!-- Profile Icon -->
                    <button id="profile-button" class="p-2 rounded-full hover:bg-black/10 transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </button>
                </div>
                 <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="p-2 rounded-md hover:bg-black/10">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                    </button>
                </div>
            </div>
        </div>
         <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-4 pt-2 pb-4 space-y-2 bg-surface">
            <a href="#search-section" class="block py-2 px-3 text-base font-medium rounded-md">Hotels</a>
            <a href="#taxi-section" class="block py-2 px-3 text-base font-medium rounded-md">Taxis</a>
            <a href="#nearby-section" class="block py-2 px-3 text-base font-medium rounded-md">Nearby</a>
            <div class="border-t border-themed pt-4">
                 <select id="mobile-language-selector" class="w-full cursor-pointer bg-transparent border-themed rounded-md text-base py-2 pl-3">
                    <!-- Options will be populated by JS -->
                </select>
            </div>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="relative h-screen flex items-center justify-center text-center overflow-hidden">
            <div class="relative z-10 p-8 rounded-xl hero-content">
                <h1 class="elegant-font text-5xl md:text-7xl font-bold">Discover Your Sanctuary</h1>
                <p class="mt-4 text-lg md:text-xl text-muted max-w-2xl mx-auto">Book exclusive resorts and hotels around the world with Fondoqi.</p>
                <a href="#search-section" class="mt-8 inline-block bg-primary text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-primary-hover transition-transform transform hover:scale-105">
                    Start Exploring
                </a>
            </div>
        </section>

        <!-- Main Content Wrapper -->
        <div class="content-overlay">
            
            <!-- Search Section -->
            <section id="search-section" class="py-20 container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="max-w-4xl mx-auto bg-surface p-8 rounded-2xl shadow-2xl -mt-48 relative z-20">
                    <h2 class="text-3xl font-bold text-center mb-2 elegant-font">Find Your Perfect Stay</h2>
                    <p class="text-center text-muted mb-8">Search deals on hotels, private homes, and much more...</p>
                    <form id="hotel-search-form" class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                        <div class="md:col-span-2">
                            <label for="destination" class="block text-sm font-medium">Destination</label>
                            <input type="text" id="destination" placeholder="e.g., Bali, Indonesia" class="mt-1 block w-full px-4 py-3 bg-transparent border border-themed rounded-lg shadow-sm">
                        </div>
                        <div>
                            <label for="checkin" class="block text-sm font-medium">Check-in</label>
                            <input type="date" id="checkin" class="mt-1 block w-full px-4 py-3 bg-transparent border border-themed rounded-lg shadow-sm">
                        </div>
                        <div>
                            <label for="checkout" class="block text-sm font-medium">Check-out</label>
                            <input type="date" id="checkout" class="mt-1 block w-full px-4 py-3 bg-transparent border border-themed rounded-lg shadow-sm">
                        </div>
                        <div class="md:col-span-4">
                            <button type="submit" class="w-full bg-primary text-white font-bold py-4 px-6 rounded-lg shadow-md hover:bg-primary-hover transition-transform transform hover:scale-102">Search Hotels</button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Nearby Hotels Section -->
            <section id="nearby-section" class="py-16">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <h2 class="text-4xl font-bold text-center elegant-font">Hotels Near You</h2>
                    <p class="text-center text-muted mt-2 mb-12">Explore top-rated stays in your current area.</p>
                    <div id="hotel-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- Hotel cards will be injected here by JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Taxi Booking Section -->
            <section id="taxi-section" class="py-20">
                 <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="max-w-4xl mx-auto bg-surface p-8 rounded-2xl shadow-xl">
                        <h2 class="text-3xl font-bold text-center mb-2 elegant-font">Book a Taxi</h2>
                        <p class="text-center text-muted mb-8">Arrange your airport transfers or city rides seamlessly.</p>
                        <form id="taxi-search-form" class="grid grid-cols-1 md:grid-cols-2 gap-4 items-end">
                            <div>
                                <label for="pickup-location" class="block text-sm font-medium">Pick-up Location</label>
                                <input type="text" id="pickup-location" placeholder="e.g., Airport, Hotel Name" class="mt-1 block w-full px-4 py-3 bg-transparent border border-themed rounded-lg shadow-sm">
                            </div>
                            <div>
                                <label for="dropoff-location" class="block text-sm font-medium">Drop-off Location</label>
                                <input type="text" id="dropoff-location" placeholder="e.g., City Center" class="mt-1 block w-full px-4 py-3 bg-transparent border border-themed rounded-lg shadow-sm">
                            </div>
                            <div>
                                <label for="pickup-date" class="block text-sm font-medium">Date</label>
                                <input type="date" id="pickup-date" class="mt-1 block w-full px-4 py-3 bg-transparent border border-themed rounded-lg shadow-sm">
                            </div>
                            <div>
                                <label for="pickup-time" class="block text-sm font-medium">Time</label>
                                <input type="time" id="pickup-time" class="mt-1 block w-full px-4 py-3 bg-transparent border border-themed rounded-lg shadow-sm">
                            </div>
                            <div class="md:col-span-2">
                                <button type="submit" class="w-full bg-secondary text-white font-bold py-4 px-6 rounded-lg shadow-md hover:bg-secondary-hover transition">Find a Ride</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-secondary text-white">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="elegant-font text-2xl font-bold">Fondoqi (فندقي)</h3>
                    <p class="mt-2 opacity-70">Your gateway to the world's most luxurious stays.</p>
                </div>
                <div>
                    <h4 class="font-semibold tracking-wider">Explore</h4>
                    <ul class="mt-4 space-y-2">
                        <li><a href="#" class="opacity-70 hover:opacity-100 transition">About Us</a></li>
                        <li><a href="#" class="opacity-70 hover:opacity-100 transition">Careers</a></li>
                        <li><a href="#" class="opacity-70 hover:opacity-100 transition">Press</a></li>
                    </ul>
                </div>
                 <div>
                    <h4 class="font-semibold tracking-wider">Support</h4>
                    <ul class="mt-4 space-y-2">
                        <li><a href="#" class="opacity-70 hover:opacity-100 transition">Help Center</a></li>
                        <li><a href="#" class="opacity-70 hover:opacity-100 transition">Contact Us</a></li>
                        <li><a href="#" class="opacity-70 hover:opacity-100 transition">Terms of Service</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold tracking-wider">Connect</h4>
                     <div class="flex mt-4 space-x-4">
                        <a href="#" class="opacity-70 hover:opacity-100 transition">
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg>
                        </a>
                        <a href="#" class="opacity-70 hover:opacity-100 transition">
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.71v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" /></svg>
                        </a>
                     </div>
                </div>
            </div>
            <div class="mt-8 border-t border-white/20 pt-8 text-center opacity-50">
                &copy; 2024 Fondoqi. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Welcome Modal -->
    <div id="welcome-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="modal-backdrop fixed inset-0 bg-gray-900/60"></div>
        <div class="modal-content bg-surface rounded-lg shadow-xl w-full max-w-md m-4 transform scale-95 text-center p-8">
            <h2 class="elegant-font text-4xl font-bold">Welcome to Fondoqi</h2>
            <p class="mt-2 text-muted">Your journey to luxury begins here.</p>
            <div class="mt-8 space-y-4">
                <button id="login-btn" class="w-full bg-primary text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-primary-hover transition">Log In</button>
                <button id="signup-btn" class="w-full bg-secondary text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-secondary-hover transition">Sign Up</button>
                <button id="guest-btn" class="mt-2 text-sm text-muted hover:text-primary hover:underline">Continue as a Guest</button>
            </div>
        </div>
    </div>

    <!-- Profile & Bookings Modal -->
    <div id="profile-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
        <div class="modal-backdrop fixed inset-0"></div>
        <div class="modal-content bg-surface rounded-lg shadow-xl w-full max-w-2xl m-4 transform scale-95">
            <div class="p-6 border-b border-themed flex justify-between items-center">
                <h3 class="text-2xl font-semibold elegant-font">My Profile & Bookings</h3>
                <button id="close-profile-modal" class="p-2 rounded-full hover:bg-black/10">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div class="p-6 max-h-[70vh] overflow-y-auto">
                <div class="flex items-center space-x-4 mb-6">
                    <img src="https://placehold.co/80x80/E2E8F0/4A5568?text=IA" alt="User Avatar" class="w-20 h-20 rounded-full">
                    <div>
                        <h4 class="text-xl font-bold">Iyhab Ahmed</h4>
                        <p class="text-muted">1234@gmail.com</p>
                    </div>
                </div>
                
                <h4 class="text-lg font-semibold mb-4 border-t border-themed pt-4">Upcoming Bookings</h4>
                <div id="upcoming-bookings" class="space-y-4">
                    <!-- Upcoming bookings injected here -->
                </div>

                <h4 class="text-lg font-semibold mb-4 mt-8 border-t border-themed pt-4">Past Bookings</h4>
                <div id="past-bookings" class="space-y-4">
                    <!-- Past bookings injected here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Message Box -->
    <div id="message-box" class="fixed bottom-5 right-5 bg-primary text-white py-3 px-6 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-500 z-50">
        <p id="message-text"></p>
    </div>


    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // --- 3D GLOBE LOGIC ---
        const globeContainer = document.getElementById('globe-container');
        let scene, camera, renderer, earth, controls;

        function initGlobe() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 2.5;
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x000000, 0);
            globeContainer.appendChild(renderer.domElement);
            const textureLoader = new THREE.TextureLoader();
            const earthTexture = textureLoader.load('https://unpkg.com/three-globe@2.27.2/example/img/earth-dark.jpg');
            const earthMaterial = new THREE.MeshStandardMaterial({ map: earthTexture, color: 0xaaaaaa });
            const earthGeometry = new THREE.SphereGeometry(1.5, 64, 64);
            earth = new THREE.Mesh(earthGeometry, earthMaterial);
            scene.add(earth);
            const ambientLight = new THREE.AmbientLight(0xffffff, 1.5);
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 3, 5);
            scene.add(directionalLight);
            addPins(20);
            addAirplanes(5);
            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.enableZoom = false;
            controls.enablePan = false;
            controls.minPolarAngle = Math.PI / 3;
            controls.maxPolarAngle = Math.PI * 2 / 3;
            animate();
        }

        function addPins(count) {
            const pinGeometry = new THREE.SphereGeometry(0.015, 16, 16);
            const pinMaterial = new THREE.MeshBasicMaterial({ color: 0x2563eb });
            for (let i = 0; i < count; i++) {
                const pin = new THREE.Mesh(pinGeometry, pinMaterial);
                const lat = (Math.random() - 0.5) * 180;
                const lon = (Math.random() - 0.5) * 360;
                const position = latLonToVector3(lat, lon, 1.5);
                pin.position.copy(position);
                earth.add(pin);
            }
        }

        let airplanes = [];
        function addAirplanes(count) {
            const airplaneShape = new THREE.Shape();
            airplaneShape.moveTo(0, -0.01); airplaneShape.lineTo(0.02, 0.01); airplaneShape.lineTo(0, 0.03); airplaneShape.lineTo(-0.02, 0.01); airplaneShape.lineTo(0, -0.01);
            const airplaneGeometry = new THREE.ShapeGeometry(airplaneShape);
            const airplaneMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide });
            for (let i = 0; i < count; i++) {
                const airplane = new THREE.Mesh(airplaneGeometry, airplaneMaterial);
                const startLat = (Math.random() - 0.5) * 180, startLon = (Math.random() - 0.5) * 360;
                const endLat = (Math.random() - 0.5) * 180, endLon = (Math.random() - 0.5) * 360;
                const startPos = latLonToVector3(startLat, startLon, 1.6), endPos = latLonToVector3(endLat, endLon, 1.6);
                const curve = new THREE.CubicBezierCurve3(startPos, startPos.clone().multiplyScalar(1.2), endPos.clone().multiplyScalar(1.2), endPos);
                airplanes.push({ mesh: airplane, curve: curve, progress: Math.random() });
                scene.add(airplane);
            }
        }

        function latLonToVector3(lat, lon, radius) {
            const phi = (90 - lat) * (Math.PI / 180), theta = (lon + 180) * (Math.PI / 180);
            const x = -(radius * Math.sin(phi) * Math.cos(theta)), y = radius * Math.cos(phi), z = radius * Math.sin(phi) * Math.sin(theta);
            return new THREE.Vector3(x, y, z);
        }

        function animate() {
            requestAnimationFrame(animate);
            earth.rotation.y += 0.0005;
            airplanes.forEach(plane => {
                plane.progress += 0.001;
                if (plane.progress > 1) plane.progress = 0;
                const pos = plane.curve.getPoint(plane.progress);
                plane.mesh.position.copy(pos);
                const nextPos = plane.curve.getPoint(Math.min(plane.progress + 0.001, 1));
                plane.mesh.lookAt(nextPos);
            });
            controls.update();
            renderer.render(scene, camera);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        window.addEventListener('resize', onWindowResize, false);
        initGlobe();

        // --- MOCK DATA ---
        const hotels = [
            { id: 1, name: 'The Azure Resort', location: 'Maldives', price: 450, rating: 4.9, image: 'https://placehold.co/600x400/3B82F6/FFFFFF?text=Azure+Resort' },
            { id: 2, name: 'Serenity Peaks Lodge', location: 'Swiss Alps', price: 320, rating: 4.8, image: 'https://placehold.co/600x400/10B981/FFFFFF?text=Serenity+Lodge' },
            { id: 3, name: 'Oasis Mirage Hotel', location: 'Dubai, UAE', price: 550, rating: 4.9, image: 'https://placehold.co/600x400/F59E0B/FFFFFF?text=Oasis+Mirage' },
            { id: 4, name: 'Kyoto Garden Ryokan', location: 'Kyoto, Japan', price: 280, rating: 4.7, image: 'https://placehold.co/600x400/EC4899/FFFFFF?text=Kyoto+Ryokan' },
            { id: 5, name: 'Coastal Breeze Inn', location: 'Santorini, Greece', price: 210, rating: 4.6, image: 'https://placehold.co/600x400/6366F1/FFFFFF?text=Coastal+Inn' },
            { id: 6, name: 'Urban Chic Boutique', location: 'Paris, France', price: 380, rating: 4.8, image: 'https://placehold.co/600x400/8B5CF6/FFFFFF?text=Urban+Chic' },
        ];
        const bookings = [
            { id: 1, hotelName: 'The Azure Resort', date: '2024-09-15 to 2024-09-20', status: 'upcoming' },
            { id: 2, hotelName: 'Kyoto Garden Ryokan', date: '2024-03-10 to 2024-03-15', status: 'past' },
            { id: 3, hotelName: 'Serenity Peaks Lodge', date: '2023-12-22 to 2023-12-28', status: 'past' },
        ];
        const languages = [ { code: 'en', name: 'English' }, { code: 'ar', name: 'العربية' }, { code: 'af', name: 'Afrikaans' }, { code: 'sq', name: 'Shqip' }, { code: 'am', name: 'አማርኛ' }, { code: 'hy', name: 'Հայերեն' }, { code: 'az', name: 'Azərbaycan' }, { code: 'eu', name: 'Euskara' }, { code: 'be', name: 'Беларуская' }, { code: 'bn', name: 'বাংলা' }, { code: 'bs', name: 'Bosanski' }, { code: 'bg', name: 'Български' }, { code: 'ca', name: 'Català' }, { code: 'ceb', name: 'Cebuano' }, { code: 'ny', name: 'Chichewa' }, { code: 'zh-CN', name: '简体中文' }, { code: 'zh-TW', name: '繁體中文' }, { code: 'co', name: 'Corsu' }, { code: 'hr', name: 'Hrvatski' }, { code: 'cs', name: 'Čeština' }, { code: 'da', name: 'Dansk' }, { code: 'nl', name: 'Nederlands' }, { code: 'eo', name: 'Esperanto' }, { code: 'et', name: 'Eesti' }, { code: 'tl', name: 'Filipino' }, { code: 'fi', name: 'Suomi' }, { code: 'fr', name: 'Français' }, { code: 'fy', name: 'Frysk' }, { code: 'gl', name: 'Galego' }, { code: 'ka', name: 'ქართული' }, { code: 'de', name: 'Deutsch' }, { code: 'el', name: 'Ελληνικά' }, { code: 'gu', name: 'ગુજરાતી' }, { code: 'ht', name: 'Kreyòl Ayisyen' }, { code: 'ha', name: 'Hausa' }, { code: 'haw', name: 'ʻŌlelo Hawaiʻi' }, { code: 'iw', name: 'עברית' }, { code: 'hi', name: 'हिन्दी' }, { code: 'hmn', name: 'Hmong' }, { code: 'hu', name: 'Magyar' }, { code: 'is', name: 'Íslenska' }, { code: 'ig', name: 'Igbo' }, { code: 'id', name: 'Bahasa Indonesia' }, { code: 'ga', name: 'Gaeilge' }, { code: 'it', name: 'Italiano' }, { code: 'ja', name: '日本語' }, { code: 'jw', name: 'Basa Jawa' }, { code: 'kn', name: 'ಕನ್ನಡ' }, { code: 'kk', name: 'Қазақ' }, { code: 'km', name: 'ខ្ែរ' }, { code: 'rw', name: 'Kinyarwanda' }, { code: 'ko', name: '한국어' }, { code: 'ku', name: 'Kurdî' }, { code: 'ky', name: 'Кыргызча' }, { code: 'lo', name: 'ລາວ' }, { code: 'la', name: 'Latina' }, { code: 'lv', name: 'Latviešu' }, { code: 'lt', name: 'Lietuvių' }, { code: 'lb', name: 'Lëtzebuergesch' }, { code: 'mk', name: 'Македонски' }, { code: 'mg', name: 'Malagasy' }, { code: 'ms', name: 'Bahasa Melayu' }, { code: 'ml', name: 'മലയാളം' }, { code: 'mt', name: 'Malti' }, { code: 'mi', name: 'Māori' }, { code: 'mr', name: 'मराठी' }, { code: 'mn', name: 'Монгол' }, { code: 'my', name: 'မြန်မာ' }, { code: 'ne', name: 'नेपाली' }, { code: 'no', name: 'Norsk' }, { code: 'or', name: 'ଓଡ଼ିଆ' }, { code: 'ps', name: 'پښتو' }, { code: 'fa', name: 'فارسی' }, { code: 'pl', name: 'Polski' }, { code: 'pt', name: 'Português' }, { code: 'pa', name: 'ਪੰਜਾਬੀ' }, { code: 'ro', name: 'Română' }, { code: 'ru', name: 'Русский' }, { code: 'sm', name: 'Samoan' }, { code: 'gd', name: 'Gàidhlig' }, { code: 'sr', name: 'Српски' }, { code: 'st', name: 'Sesotho' }, { code: 'sn', name: 'Shona' }, { code: 'sd', name: 'سنڌي' }, { code: 'si', name: 'සිංහල' }, { code: 'sk', name: 'Slovenčina' }, { code: 'sl', name: 'Slovenščina' }, { code: 'so', name: 'Soomaali' }, { code: 'es', name: 'Español' }, { code: 'su', name: 'Basa Sunda' }, { code: 'sw', name: 'Kiswahili' }, { code: 'sv', name: 'Svenska' }, { code: 'tg', name: 'Тоҷикӣ' }, { code: 'ta', name: 'தமிழ்' }, { code: 'tt', name: 'Татар' }, { code: 'te', name: 'తెలుగు' }, { code: 'th', name: 'ไทย' }, { code: 'tr', name: 'Türkçe' }, { code: 'tk', name: 'Türkmen' }, { code: 'uk', name: 'Українська' }, { code: 'ur', name: 'اردو' }, { code: 'ug', name: 'ئۇيغۇر' }, { code: 'uz', name: 'Oʻzbek' }, { code: 'vi', name: 'Tiếng Việt' }, { code: 'cy', name: 'Cymraeg' }, { code: 'xh', name: 'isiXhosa' }, { code: 'yi', name: 'ייִדיש' }, { code: 'yo', name: 'Yorùbá' }, { code: 'zu', name: 'isiZulu' } ];

        // --- UI LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {
            const hotelListContainer = document.getElementById('hotel-list');
            const profileModal = document.getElementById('profile-modal');
            const welcomeModal = document.getElementById('welcome-modal');
            const profileButton = document.getElementById('profile-button');
            const closeProfileModalButton = document.getElementById('close-profile-modal');
            const upcomingBookingsContainer = document.getElementById('upcoming-bookings');
            const pastBookingsContainer = document.getElementById('past-bookings');
            const hotelSearchForm = document.getElementById('hotel-search-form');
            const taxiSearchForm = document.getElementById('taxi-search-form');
            const messageBox = document.getElementById('message-box');
            const messageText = document.getElementById('message-text');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const languageSelector = document.getElementById('language-selector');
            const mobileLanguageSelector = document.getElementById('mobile-language-selector');
            const themeSwitcherButton = document.getElementById('theme-switcher-button');
            const themeMenu = document.getElementById('theme-menu');

            // Theme Switcher Logic
            function applyTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('fondoqi-theme', theme);
            }

            themeSwitcherButton.addEventListener('click', () => {
                themeMenu.classList.toggle('hidden');
            });

            themeMenu.addEventListener('click', (e) => {
                if (e.target.tagName === 'A') {
                    const theme = e.target.dataset.theme;
                    applyTheme(theme);
                    themeMenu.classList.add('hidden');
                }
            });
            
            // Apply saved theme on load
            const savedTheme = localStorage.getItem('fondoqi-theme') || 'light';
            applyTheme(savedTheme);


            // Populate Hotels
            function renderHotels() {
                hotelListContainer.innerHTML = '';
                hotels.forEach(hotel => {
                    const hotelCard = `
                        <div class="bg-surface rounded-xl shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300">
                            <img src="${hotel.image}" alt="${hotel.name}" class="w-full h-56 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/CCCCCC/FFFFFF?text=Image+Error';">
                            <div class="p-6">
                                <h3 class="text-xl font-bold elegant-font">${hotel.name}</h3>
                                <p class="text-muted mt-1">${hotel.location}</p>
                                <div class="flex justify-between items-center mt-4">
                                    <div>
                                        <span class="text-2xl font-bold text-primary">$${hotel.price}</span>
                                        <span class="text-muted">/night</span>
                                    </div>
                                    <div class="flex items-center space-x-1 text-yellow-500">
                                        <span>${hotel.rating}</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>
                                    </div>
                                </div>
                                <button class="mt-6 w-full bg-primary text-white font-bold py-3 px-4 rounded-lg hover:bg-primary-hover transition">View Details</button>
                            </div>
                        </div>
                    `;
                    hotelListContainer.innerHTML += hotelCard;
                });
            }

            // Populate Bookings
            function renderBookings() {
                upcomingBookingsContainer.innerHTML = '';
                pastBookingsContainer.innerHTML = '';
                const upcoming = bookings.filter(b => b.status === 'upcoming');
                const past = bookings.filter(b => b.status === 'past');
                if (upcoming.length === 0) { upcomingBookingsContainer.innerHTML = '<p class="text-muted">No upcoming bookings.</p>'; } 
                else { upcoming.forEach(booking => { upcomingBookingsContainer.innerHTML += `<div class="border border-themed rounded-lg p-4 flex justify-between items-center"><div><p class="font-bold">${booking.hotelName}</p><p class="text-sm text-muted">${booking.date}</p></div><a href="#" class="text-primary hover:underline text-sm">Manage</a></div>`; }); }
                if (past.length === 0) { pastBookingsContainer.innerHTML = '<p class="text-muted">No past bookings.</p>'; }
                else { past.forEach(booking => { pastBookingsContainer.innerHTML += `<div class="border border-themed rounded-lg p-4 flex justify-between items-center opacity-70"><div><p class="font-bold">${booking.hotelName}</p><p class="text-sm text-muted">${booking.date}</p></div><a href="#" class="text-primary hover:underline text-sm">Book Again</a></div>`; }); }
            }

            // Language Selector Logic
            function populateLanguages() {
                [languageSelector, mobileLanguageSelector].forEach(selector => {
                    selector.innerHTML = '';
                    languages.forEach(lang => {
                        const option = document.createElement('option');
                        option.value = lang.code; option.textContent = lang.name;
                        if (lang.code === 'en') option.selected = true;
                        selector.appendChild(option);
                    });
                });
            }
            function handleLanguageChange(event) { showMessage(`Language changed to ${event.target.options[event.target.selectedIndex].text}`); }
            languageSelector.addEventListener('change', handleLanguageChange);
            mobileLanguageSelector.addEventListener('change', handleLanguageChange);

            // Modal Logic
            function openModal(modal) {
                modal.classList.remove('hidden');
                setTimeout(() => { modal.querySelector('.modal-backdrop').classList.remove('opacity-0'); modal.querySelector('.modal-content').classList.remove('scale-95'); }, 10);
            }
            function closeModal(modal) {
                modal.querySelector('.modal-backdrop').classList.add('opacity-0');
                modal.querySelector('.modal-content').classList.add('scale-95');
                setTimeout(() => { modal.classList.add('hidden'); }, 300);
            }
            profileButton.addEventListener('click', () => openModal(profileModal));
            closeProfileModalButton.addEventListener('click', () => closeModal(profileModal));
            profileModal.querySelector('.modal-backdrop').addEventListener('click', () => closeModal(profileModal));
            
            // Welcome Modal Logic
            const guestBtn = document.getElementById('guest-btn'), loginBtn = document.getElementById('login-btn'), signupBtn = document.getElementById('signup-btn');
            if (!sessionStorage.getItem('welcomeModalShown')) { openModal(welcomeModal); }
            guestBtn.addEventListener('click', () => { closeModal(welcomeModal); sessionStorage.setItem('welcomeModalShown', 'true'); });
            loginBtn.addEventListener('click', () => { showMessage('Login functionality coming soon!'); closeModal(welcomeModal); sessionStorage.setItem('welcomeModalShown', 'true'); });
            signupBtn.addEventListener('click', () => { showMessage('Sign up functionality coming soon!'); closeModal(welcomeModal); sessionStorage.setItem('welcomeModalShown', 'true'); });

            // Message Box Logic
            function showMessage(message) {
                messageText.textContent = message;
                messageBox.classList.remove('translate-y-20', 'opacity-0');
                setTimeout(() => { messageBox.classList.add('translate-y-20', 'opacity-0'); }, 3000);
            }

            // Form Submissions
            hotelSearchForm.addEventListener('submit', (e) => { e.preventDefault(); showMessage('Searching for hotels...'); });
            taxiSearchForm.addEventListener('submit', (e) => { e.preventDefault(); showMessage('Finding available rides...'); });
            
            // Mobile Menu Toggle
            mobileMenuButton.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });

            // Header scroll effect
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) { header.classList.add('shadow-md'); } else { header.classList.remove('shadow-md'); }
            });

            // Initial renders
            populateLanguages();
            renderHotels();
            renderBookings();
        });
    </script>
</body>
</html>